// Module included in the following assemblies:
//
// * storage/persistent-storage-ceph.adoc[leveloffset=+1]

[id='ceph-volume-security-{context}']
= Ceph Volume Security

A significant difference between shared volumes, such as NFS and GlusterFS,
and block volumes, such as Ceph RBD, iSCSI, and most cloud storage, is 
that the user and group IDs defined in the Pod definition or container 
image are applied to the target physical storage. This is referred to as 
managing ownership of the block device. For example, if the Ceph RBD 
mount has its owner set to `123` and its group ID set to `567`, and if the 
Pod defines its `runAsUser` set to `222` and its `fsGroup` to be `7777`, 
then the Ceph RBD physical mount’s ownership will be changed to `222:7777`.

[NOTE]
====
Even if the user and group IDs are not defined in the Pod specification, 
the resulting Pod may have defaults defined for these IDs based on its 
matching SCC, or its project. 
====

A Pod defines the group ownership of a Ceph RBD volume using the `fsGroup` 
stanza under the Pod’s `securityContext` definition:

[source,yaml]
----
spec:
  containers:
    - name:
    ...
  securityContext: <1>
    fsGroup: 7777 <2>
----
<1> The `securityContext` must be defined at the Pod level, not under a 
specific container.
<2> All containers in the pod will have the same `fsGroup` ID.
